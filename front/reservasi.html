<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Glam</title>

    <!-- Bootstrap -->
    <link href="assets/css/bootstrap.min.css" rel="stylesheet">
    <link href="assets/css/styles.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,700,900" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,500i,700" rel="stylesheet">
    <link href="assets/css/font-awesome.min.css" rel="stylesheet">
    <link href="assets/css/owl.carousel.css" rel="stylesheet">
    <link href="assets/css/owl.theme.css" rel="stylesheet">
    <link href="assets/css/colorbox.css" rel="stylesheet">
    <link href="assets/css/responsive.css" rel="stylesheet">
    <link href="assets/css/bootstrap-datetimepicker.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.11.2/css/bootstrap-select.min.css">



  </head>
  <!-- data-spy="scroll" -->
  <body data-target=".navbar-fixed-top">
      <header class="navbar-fixed-top">
          <div class="container top-bar">
              <div class="row">
                  <div class="col-md-4">
                      <div class="logo">
                          <a class="page-scroll" href="#carousel-example-generic"><img src="images/logo.png" alt="Glam" /></a>
                      </div>
                  </div>
                  <div class="col-md-8">
                      <div class="head-contact right">
                          <span><i class="fa fa-map-marker" aria-hidden="true"></i> Soho Waterplace A27, Apartemen Waterplace Pakuwon Indah, Surabaya</span>
                          <span><i class="fa fa-phone" aria-hidden="true"></i> 031-0000000</span>
                      </div>
                  </div>
              </div>
          </div>
          <div class="sosial-media">
              <a href="#"><i class="fa fa-facebook-square" aria-hidden="true"></i></a>
              <a href="#"><i class="fa fa-instagram" aria-hidden="true"></i></a>
          </div>
          <nav class="navbar navbar-default navbar-glam" role="navigation">
            <div class="container nav-container">
              <!-- Brand and toggle get grouped for better mobile display -->
              <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
              </div>

              <!-- Collect the nav links, forms, and other content for toggling -->
              <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                    <li><a class="page-scroll" href="index.html">Home</a></li>
                    <li><a class="page-scroll" href="about.html">About Us</a></li>
                    <li><a class="page-scroll" href="services.html">Services</a></li>
                    <li><a class="page-scroll" href="promotion.html">Promotion</a></li>
                    <li><a class="page-scroll" href="gallery.html">Gallery</a></li>
                    <li><a class="page-scroll" href="testimoni.html">Testimonial</a></li>
                    <li><a class="page-scroll" href="contact.html">Contact</a></li>
                </ul>
              </div><!-- /.navbar-collapse -->

            </div><!-- /.container-fluid -->
          </nav>
      </header>

      <div class="container-fluid title-container">
          <div class="container">
              <div class="title-single">
                  <h2>PAYMENT METHODS</h2>
                  <p>THIS IS PAYMENT METHODS</p>
                  <ol class="breadcrumb">
                      <li><a href="index.html">Home</a></li>
                      <li class="active">Payment Methods</li>
                  </ol>
              </div>
          </div>
      </div>

      <div class="container reservation-single" id="book">
          <div class="row">
              <div class="col-md-4">
                  <div class="opening-time">
                      <div class="opening-title">
                          <h4>OPENING TIME</h4>
                      </div>
                      <div class="openingday">
                          <h3>MONDAY - SUNDAY</h3>
                          <h2>09<span class="smalls">.00</span> - 20<span class="smalls">.00</span></h2>
                      </div>
                  </div>
              </div>
              <div class="col-md-8">
                  <div class="reservation">
                      <div class="title">
                         <h2>YOUR <span class="low">RESERVATION</span> </h2>
                         <p>Create your services with our team and this will be guarantee booking for your salon experience</p>

                      </div>
                      <div class="alert alert-danger" style="display:none">
                          <button class="close" data-close="alert"></button> You have some form errors. Please check below.
                      </div>
                      <form role="form" action="#" method="post"  id="form_reservation_front" class="f1">
                          <div class="f1-steps">
                              <div class="f1-progress">
                                  <div class="f1-progress-line" data-now-value="16.66" data-number-of-steps="3" style="width: 16.66%;"></div>
                              </div>
                              <div class="f1-step active" data-nomortab="1">
                                  <div class="f1-step-icon">1</i></div>
                                  <p>Step 1</p>
                              </div>
                              <div class="f1-step " data-nomortab="2">
                                  <div class="f1-step-icon">2</div>
                                  <p>Step 2</p>
                              </div>
                              <div class="f1-step" data-nomortab="3">
                                  <div class="f1-step-icon">3</div>
                                  <p>Step 3</p>
                              </div>
                          </div>

                          <fieldset>
                              <div class="row">
                                  <div class="col-md-12">
                                      <div class="form-group">
                                          <label class="control-label">Services :*</label>
                                            <select class="selectpicker form-control aa" name="service_id" id="service_id">
                                                <option value="option">option</option>
                                                <option value="'.$r->service_id.'"'.$terpilih.' >assaddsad</option>

                                            </select>
                                      </div>
                                  </div>
                                  <div class="col-sm-9">
                                      <div class="form-group">
                                          <label class="control-label">Date :*</label>
                                          <div class="input-group input-medium date date-picker" data-date-format="dd MM yyyy" data-date-start-date="+0d">
                                              <input type="text" class="form-control form-reserve class-datepicker" name="reservasi_tgl" id="reservasi_tgl" value="<?php echo date('d F y', strtotime(@$reservation_tgl)) ?>" readonly>
                                              <span class="input-group-btn">
                                                  <button class="btn default date-set" type="button">
                                                      <i class="fa fa-calendar"></i>
                                                  </button>
                                              </span>
                                          </div>

                                      </div>
                                  </div>
                                  <div class="col-sm-3">
                                      <div class="f1-buttons">
                                          <button type="button" class="btn btn-next pull-right btn-lg btn-sub btn-space" id="btn_next_1">Next</button>
                                      </div>
                                  </div>
                              </div>

                          </fieldset>

                          <fieldset>

                              <div class="stylish-detail">
                                  <div class="col-xs-4">
                                      <div class="stylish">
                                          <!-- <img class="centered-and-cropped" src="front/images/men-hair.jpg" /> -->
                                          <img class="centered-and-cropped" src="images/1.jpg" /> ' ?>
                                      </div>
                                  </div>
                                  <div class="col-xs-4 form-group">
                                      <h3>Nama Staff</h3>
                                      <div class="checkbox-container">

                                                  <label class="input-group">
                                                      <span>
                                                          <input type="radio"   class="radio_product_id" name="product_id" > Produk 1
                                                      </span>
                                                  </label>

                                      </div>
                                  </div>
                                  <div class="col-xs-4">
                                      <div class="form-group jam" id="jam_<?php echo $f->staff_id?>">
                                          <label for="date-set">Time :*</label>
                                          <div class="input-group">
                                              <input type="text" size="10"  name="jam_terpilih"  readonly class="form-control form-reserve timepicker timepicker-24">
                                              <span class="input-group-btn">
                                                  <button class="btn default date-set" type="button">
                                                      <i class="fa fa-clock-o"></i>
                                                  </button>
                                              </span>
                                          </div>
                                      </div>
                                  </div>
                              </div>
                                  <?php endforeach; ?>
                              </div>
                              <div class="f1-buttons">
                                  <button type="button" class="btn btn-previous btn-lg btn-sub btn-space">Previous</button>
                                  <button type="button" class="btn btn-next btn-lg btn-sub btn-space">Next</button>
                              </div>
                          </fieldset>

                          <fieldset>
                              <div class="row">
                                  <div id="content_biodata">
                                  </div>
                              </div>

                              <div class="f1-buttons">
                                  <button type="button" class="btn btn-previous btn-lg btn-sub btn-space">Previous</button>
                                  <button type="submit" class="btn btn-submit btn-lg btn-sub btn-space">Submit</button>
                              </div>
                          </fieldset>
                      </form>
                  </div>
              </div>
          </div>
      </div>

      <div class="container-fluid footer">
          <div class="container">
              <div class="row">
                  <div class="col-md-6">
                      <img src="images/logo.png" alt="" />
                  </div>
                  <div class="col-md-6">
                      <p class="right">
                          Copyright (c) 2016 Copyright Glam Hair Culture All Rights Reserved.
                      </p>
                  </div>
              </div>

          </div>
      </div>



    <script src="assets/js/jquery.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>
    <script src="assets/js/owl.carousel.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.11.2/js/bootstrap-select.min.js"></script>
    <script src="assets/js/jquery.easing.min.js"></script>
    <script src="assets/js/jquery.colorbox.js"></script>
    <script src="assets/js/bootstrap-datetimepicker.min.js"></script>
    <script src="assets/js/jquery.downCount.js"></script>



    <script type="text/javascript">
    //jQuery to collapse the navbar on scroll
    $(window).scroll(function() {
        if ($(".navbar").offset().top > 50) {
            $(".navbar-fixed-top").addClass("top-nav-collapse");
        } else {
            $(".navbar-fixed-top").removeClass("top-nav-collapse");
        }
    });

    // jQuery for page scrolling feature - requires jQuery Easing plugin
    $(function() {
        $('a.page-scroll').bind('click', function(event) {
            var $anchor = $(this);
            $('html, body').stop().animate({
                scrollTop: $($anchor.attr('href')).offset().top -100 '2px'
            }, 1500, 'easeInOutExpo');
            event.preventDefault();
        });
    });

    $(document).ready(function($){
    $(".group2").colorbox({
            rel: "group2",
            transition:"fade",
            maxWidth: "98%",
            maxHeight: "98%",
            photo: true
        });
    });

    $(window).resize(function () {
        $(".group2").colorbox.resize({
            maxWidth: "98%",
            maxHeight: "98%"
        });
    });
    $(document).bind('cbox_complete', function(){
        var cboxTitleHeight = $('#cboxTitle').height();
        var cboxContentHeight = $('#cboxContent').height();
        var cboxWrapperHeight = $('#cboxWrapper').height();
        var colorboxHeight = $('#colorbox').height();

        $('#cboxMiddleLeft, #cboxMiddleRight, #cboxContent').css('height', (cboxContentHeight + cboxTitleHeight) + 'px');
        $('#cboxWrapper').css('height', (cboxWrapperHeight + cboxTitleHeight) + 'px');
        $('#colorbox').css('height', (colorboxHeight + cboxTitleHeight) + 'px');
    });

    $(document).ready(function () {
              $(".navbar-toggle").on("click", function () {
                    $(this).toggleClass("active");
              });
    });
    </script>

    <script type="text/javascript">

    $('.date-picker').datepicker({
      autoOpen: false,
        orientation: "left",
        autoclose: true
    });

    $('.jam').hide();
    $('.radio_product_id').click(function(event) {
        var staff_id=$(this).attr('data-staff');
        $('.jam').hide();
        $('#jam_'+staff_id).show();
    });

    $('.timepicker-24').timepicker({
        autoclose: true,
        minuteStep: 5,
        showSeconds: false,
        showMeridian: false
    });
    $('.selectpicker').selectpicker({
    style: 'btn-select',
    size: 8
    });
    // handle input group button click
    $('.timepicker').parent('.input-group').on('click', '.input-group-btn', function(e){
        e.preventDefault();
        $(this).parent('.input-group').find('.timepicker').timepicker('showWidget');
    });

    function get_content_tab3() {
        $('#content_biodata').load('<?php echo site_url(); ?>/frontreservation/tab_biodata', {}, function(){

        });

    }
    // var hasil_tab1 = false;
    var hasil_tab1 = false;
    function get_schedule() {

        var reservasi_date = $('#reservasi_tgl').val();
        var reservasi_service_id = $('#service_id').val();
        if (reservasi_service_id == '' || reservasi_date == '') {
            NotifikasiToast({
                positionClass: 'toast-top-full-width',
                type : 'error', // ini tipe notifikasi success,warning,info,error
                msg : 'Tanda (*) wajib diisi', //ini isi pesan
                title : 'Error', //ini judul pesan
            });
        }else {
        $.ajax({
            url: '<?php echo site_url() ?>frontreservation/get_schedule',
            type: 'post',
            data: {reservasi_date:reservasi_date, reservasi_service_id:reservasi_service_id},
            async: false
        })
        .done(function(res) {
            if(res.stat){
                // get_content_tab2(res.ar_product,res.product_id_update,res.staff_id_update);
                // window.location.replace('<?php echo site_url() ?>frontreservation?service_id='+reservasi_service_id+'&tanggal='+reservasi_date);
            }else{
                NotifikasiToast({
                    positionClass: 'toast-top-full-width',
                    type : 'error', // ini tipe notifikasi success,warning,info,error
                    msg : res.pesan, //ini isi pesan
                    title : 'Error', //ini judul pesan
                });
            }
            hasil_tab1 = res.stat;
        })
        .fail(function() {
            console.log("error");
        })
        ;
        return hasil_tab1;
        }
    }
    function get_time_staff() {
        var product_id            = $('input[name=product_id]:checked').val();
        var staff_id              = $('input[name=product_id]:checked').attr('data-staff');
        var jam_terpilih          = $('#jamku_'+staff_id).val();
        var reservation_tgl       = $('#reservasi_tgl').val();
        var reservation_id_update = $('#reservation_id_update').val();
        var jam = $('#jamku').val();
        if ($('input[name=product_id]:checked').length == 0 || jam_terpilih == '') {
            NotifikasiToast({
                positionClass: 'toast-top-full-width',
                type : 'error', // ini tipe notifikasi success,warning,info,error
                msg : 'Anda Belum memilih Product Service', //ini isi pesan
                title : 'Error', //ini judul pesan
            });
            return false;
        }else{
            $.ajax({
                url: '<?php echo site_url() ?>frontreservation/get_time_staff',
                type: 'post',
                data: {product_id:product_id, jam_terpilih:jam_terpilih,staff_id:staff_id, reservation_tgl:reservation_tgl,reservation_id_update:reservation_id_update},
                async: false
            })
            .done(function(res) {
                if(res.stat){
                    get_content_tab3(res.ar_reservation_id);
                }else{
                    NotifikasiToast({
                        positionClass: 'toast-top-full-width',
        				type : 'error', // ini tipe notifikasi success,warning,info,error
        				msg : res.pesan, //ini isi pesan
        				title : 'Error', //ini judul pesan
        			});
                }
                hasil_tab1 = res.stat;
            })
            .fail(function() {
                console.log("error");
            })
            ;
            return hasil_tab1;
        }

    }


    function btnInsert () {
        // var formData = $('#form_reservation').serialize();
        var formData = new FormData($('#form_reservation_front')[0]);
        $.ajax({
            url: '<?php echo site_url(); ?>/frontreservation/create_action',
            type: 'post',
            data: formData,
            contentType: false,
            processData: false,
        })
        .done(function(res) {
            if(res.stat){
                swal({
                            title: "Success!",
                            text: "Your resevation code is",
                            type: "success",
                            showCancelButton: false,
                            confirmButtonClass: "btn-info",
                            confirmButtonText: "Done!",
                            closeOnConfirm: true
                        },
                        function(){
                            var last_id = res.last_id;
                            document.getElementById("form_reservation_front").reset();
                            $('#staff_id').val('').change();
                            $('#staff_id').trigger('change');
                            window.location.replace('<?php echo site_url() ?>konfirmasi/payment/'+last_id);
                        });
            }else{
                NotifikasiToast({
                    positionClass: 'toast-top-full-width',
                    type : 'error', // ini tipe notifikasi success,warning,info,error
                    msg : res.pesan, //ini isi pesan
                    title : 'Error', //ini judul pesan
                });
            }
        })
        .fail(function() {
            console.log("error");
        });
    }


    function scroll_to_class(element_class, removed_height) {
    	var scroll_to = $(element_class).offset().top - removed_height;
    	if($(window).scrollTop() != scroll_to) {
    		$('html, body').stop().animate({scrollTop: scroll_to}, 0);
    	}
    }

    function bar_progress(progress_line_object, direction) {
    	var number_of_steps = progress_line_object.data('number-of-steps');
    	var now_value = progress_line_object.data('now-value');
    	var new_value = 0;
    	if(direction == 'right') {
    		new_value = now_value + ( 100 / number_of_steps );
    	}
    	else if(direction == 'left') {
    		new_value = now_value - ( 100 / number_of_steps );
    	}
    	progress_line_object.attr('style', 'width: ' + new_value + '%;').data('now-value', new_value);
    }




    jQuery(document).ready(function() {

        $('.f1 fieldset:first').fadeIn('slow');

        $('.f1 input[type="text"], .f1 input[type="password"], .f1 textarea').on('focus', function() {
        	$(this).removeClass('input-error');
        });

        // next step
        $('.f1 .btn-next').on('click', function() {
        	var parent_fieldset = $(this).parents('fieldset');
        	var next_step = false;
        	// navigation steps / progress steps
        	var current_active_step = $(this).parents('.f1').find('.f1-step.active');
        	var progress_line = $(this).parents('.f1').find('.f1-progress-line');

            var nomortab_sekarang = current_active_step.attr('data-nomortab');
            // console.log(nomortab_sekarang);
            if (nomortab_sekarang ==1) {
                var hasila = get_schedule();
                var next_step = hasila;

            }else if (nomortab_sekarang ==2 ) {

                var hasila = get_time_staff();
                // console.log(hasila);
                if(!hasila){
                    var next_step = hasila;        // consolo
                }else{
                    var next_step = hasila;
                }
            }
        	if( next_step ) {
        		parent_fieldset.fadeOut(400, function() {
        			// change icons
        			current_active_step.removeClass('active').addClass('activated').next().addClass('active');
        			// progress bar
        			bar_progress(progress_line, 'right');
        			// show next step
    	    		$(this).next().fadeIn();
    	    		// scroll window to beginning of the form
        			scroll_to_class( $('.f1'), 20 );
    	    	});
        	}

        });

        // previous step
        $('.f1 .btn-previous').on('click', function() {
        	// navigation steps / progress steps
        	var current_active_step = $(this).parents('.f1').find('.f1-step.active');
        	var progress_line = $(this).parents('.f1').find('.f1-progress-line');

        	$(this).parents('fieldset').fadeOut(400, function() {
        		// change icons
        		current_active_step.removeClass('active').prev().removeClass('activated').addClass('active');
        		// progress bar
        		bar_progress(progress_line, 'left');
        		// show previous step
        		$(this).prev().fadeIn();
        		// scroll window to beginning of the form
    			scroll_to_class( $('.f1'), 20 );
        	});
        });

        // submit
        $('.f1').on('submit', function(e) {


        });

        $('#btn_next_1').trigger('click');

    });


    </script>
  </body>
</html>
